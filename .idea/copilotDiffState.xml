<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/public/index.html">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/public/index.html" />
              <option name="originalContent" value="&lt;!DOCTYPE html&gt;&#10;&lt;html lang=&quot;en&quot;&gt;&#10;  &lt;head&gt;&#10;    &lt;meta charset=&quot;utf-8&quot; /&gt;&#10;    &lt;link rel=&quot;icon&quot; href=&quot;%PUBLIC_URL%/favicon.ico&quot; /&gt;&#10;    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot; /&gt;&#10;    &lt;meta name=&quot;theme-color&quot; content=&quot;#000000&quot; /&gt;&#10;    &lt;meta&#10;      name=&quot;description&quot;&#10;      content=&quot;Web site created using create-react-app&quot;&#10;    /&gt;&#10;    &lt;link rel=&quot;apple-touch-icon&quot; href=&quot;%PUBLIC_URL%/logo192.png&quot; /&gt;&#10;    &lt;!--&#10;      manifest.json provides metadata used when your web app is installed on a&#10;      user's mobile device or desktop. See https://developers.google.com/web/fundamentals/web-app-manifest/&#10;    --&gt;&#10;    &lt;link rel=&quot;manifest&quot; href=&quot;%PUBLIC_URL%/manifest.json&quot; /&gt;&#10;    &lt;!--&#10;      Notice the use of %PUBLIC_URL% in the tags above.&#10;      It will be replaced with the URL of the `public` folder during the build.&#10;      Only files inside the `public` folder can be referenced from the HTML.&#10;&#10;      Unlike &quot;/favicon.ico&quot; or &quot;favicon.ico&quot;, &quot;%PUBLIC_URL%/favicon.ico&quot; will&#10;      work correctly both with client-side routing and a non-root public URL.&#10;      Learn how to configure a non-root public URL by running `npm run build`.&#10;    --&gt;&#10;    &lt;title&gt;React App&lt;/title&gt;&#10;  &lt;/head&gt;&#10;  &lt;body&gt;&#10;    &lt;noscript&gt;You need to enable JavaScript to run this app.&lt;/noscript&gt;&#10;    &lt;div id=&quot;root&quot;&gt;&lt;/div&gt;&#10;    &lt;!--&#10;      This HTML file is a template.&#10;      If you open it directly in the browser, you will see an empty page.&#10;&#10;      You can add webfonts, meta tags, or analytics to this file.&#10;      The build step will place the bundled scripts into the &lt;body&gt; tag.&#10;&#10;      To begin the development, run `npm start` or `yarn start`.&#10;      To create a production bundle, use `npm run build` or `yarn build`.&#10;    --&gt;&#10;  &lt;/body&gt;&#10;&lt;/html&gt;&#10;" />
              <option name="updatedContent" value="&lt;!DOCTYPE html&gt;&#10;&lt;html lang=&quot;en&quot;&gt;&#10;  &lt;head&gt;&#10;    &lt;meta charset=&quot;UTF-8&quot; /&gt;&#10;    &lt;link rel=&quot;icon&quot; type=&quot;image/svg+xml&quot; href=&quot;/favicon.ico&quot; /&gt;&#10;    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot; /&gt;&#10;    &lt;title&gt;Social Media Manager&lt;/title&gt;&#10;  &lt;/head&gt;&#10;  &lt;body&gt;&#10;    &lt;div id=&quot;root&quot;&gt;&lt;/div&gt;&#10;    &lt;script type=&quot;module&quot; src=&quot;/src/index.tsx&quot;&gt;&lt;/script&gt;&#10;  &lt;/body&gt;&#10;&lt;/html&gt;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/src/components/UserInput.tsx">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/components/UserInput.tsx" />
              <option name="updatedContent" value="import React, { useState, useEffect } from 'react';&#10;import {&#10;  FormControl,&#10;  FormLabel,&#10;  Input,&#10;  InputGroup,&#10;  InputRightElement,&#10;  Spinner,&#10;  Text,&#10;  FormErrorMessage,&#10;} from '@chakra-ui/react';&#10;import { CheckIcon, CloseIcon } from '@chakra-ui/icons';&#10;import { userAPI } from '../services/api';&#10;&#10;interface UserInputProps {&#10;  value: string;&#10;  onChange: (value: string) =&gt; void;&#10;  onValidUser?: (userId: number, username: string) =&gt; void;&#10;  isRequired?: boolean;&#10;  isReadOnly?: boolean;&#10;  existingUsers?: Array&lt;{ id: number; username: string }&gt;;&#10;  label?: string;&#10;  placeholder?: string;&#10;  errorMessage?: string;&#10;}&#10;&#10;interface UsernameValidation {&#10;  isValidating: boolean;&#10;  isValid: boolean | null;&#10;  validatedUsername: string;&#10;  validatedUserId: number | null;&#10;}&#10;&#10;const UserInput: React.FC&lt;UserInputProps&gt; = ({&#10;  value,&#10;  onChange,&#10;  onValidUser,&#10;  isRequired = false,&#10;  isReadOnly = false,&#10;  existingUsers = [],&#10;  label = 'Uživatelské jméno',&#10;  placeholder = 'Např. jannovak',&#10;  errorMessage&#10;}) =&gt; {&#10;  const [usernameValidation, setUsernameValidation] = useState&lt;UsernameValidation&gt;({&#10;    isValidating: false,&#10;    isValid: null,&#10;    validatedUsername: '',&#10;    validatedUserId: null&#10;  });&#10;&#10;  useEffect(() =&gt; {&#10;    if (value &amp;&amp; !isReadOnly) {&#10;      const debounceTimer = setTimeout(() =&gt; {&#10;        validateUsername(value);&#10;      }, 500);&#10;&#10;      return () =&gt; clearTimeout(debounceTimer);&#10;    } else if (!value) {&#10;      setUsernameValidation({&#10;        isValidating: false,&#10;        isValid: null,&#10;        validatedUsername: '',&#10;        validatedUserId: null&#10;      });&#10;    }&#10;  }, [value, isReadOnly]);&#10;&#10;  const validateUsername = async (username: string) =&gt; {&#10;    if (!username || username.length &lt; 2) {&#10;      setUsernameValidation({&#10;        isValidating: false,&#10;        isValid: null,&#10;        validatedUsername: '',&#10;        validatedUserId: null&#10;      });&#10;      return;&#10;    }&#10;&#10;    try {&#10;      setUsernameValidation(prev =&gt; ({&#10;        ...prev,&#10;        isValidating: true,&#10;        isValid: null&#10;      }));&#10;&#10;      const response = await userAPI.getUserByUsername(username);&#10;      const userData = response.data;&#10;&#10;      // Check if user already exists in the existing users list&#10;      const isAlreadyExists = existingUsers.some(user =&gt; user.id === userData.id);&#10;&#10;      const isValid = !isAlreadyExists;&#10;      &#10;      setUsernameValidation({&#10;        isValidating: false,&#10;        isValid: isValid,&#10;        validatedUsername: username,&#10;        validatedUserId: userData.id&#10;      });&#10;&#10;      // Call callback with valid user data&#10;      if (isValid &amp;&amp; onValidUser) {&#10;        onValidUser(userData.id, username);&#10;      }&#10;&#10;    } catch (error: any) {&#10;      setUsernameValidation({&#10;        isValidating: false,&#10;        isValid: false,&#10;        validatedUsername: username,&#10;        validatedUserId: null&#10;      });&#10;    }&#10;  };&#10;&#10;  const getUsernameValidationIcon = () =&gt; {&#10;    if (usernameValidation.isValidating) {&#10;      return &lt;Spinner size=&quot;sm&quot; /&gt;;&#10;    }&#10;    if (usernameValidation.isValid === true) {&#10;      return &lt;CheckIcon color=&quot;green.500&quot; /&gt;;&#10;    }&#10;    if (usernameValidation.isValid === false) {&#10;      return &lt;CloseIcon color=&quot;red.500&quot; /&gt;;&#10;    }&#10;    return null;&#10;  };&#10;&#10;  const getValidationMessage = () =&gt; {&#10;    if (usernameValidation.isValid === false &amp;&amp; usernameValidation.validatedUsername === value) {&#10;      // Check if user already exists in existing users&#10;      const isAlreadyExists = existingUsers.some(&#10;        user =&gt; user.username.toLowerCase() === value.toLowerCase()&#10;      );&#10;&#10;      if (isAlreadyExists) {&#10;        return 'Tento uživatel už má oprávnění';&#10;      }&#10;      return 'Uživatel s tímto jménem neexistuje';&#10;    }&#10;&#10;    if (usernameValidation.isValid === true &amp;&amp; usernameValidation.validatedUsername === value) {&#10;      return 'Uživatel nalezen ✓';&#10;    }&#10;&#10;    return null;&#10;  };&#10;&#10;  const validationMessage = getValidationMessage();&#10;  const hasError = !!errorMessage || (usernameValidation.isValid === false &amp;&amp; usernameValidation.validatedUsername === value);&#10;&#10;  return (&#10;    &lt;FormControl isRequired={isRequired} isInvalid={hasError}&gt;&#10;      &lt;FormLabel&gt;{label}&lt;/FormLabel&gt;&#10;      &lt;InputGroup&gt;&#10;        &lt;Input&#10;          value={value}&#10;          onChange={(e) =&gt; onChange(e.target.value)}&#10;          placeholder={placeholder}&#10;          isReadOnly={isReadOnly}&#10;          bg={isReadOnly ? 'gray.50' : 'white'}&#10;        /&gt;&#10;        &lt;InputRightElement&gt;&#10;          {getUsernameValidationIcon()}&#10;        &lt;/InputRightElement&gt;&#10;      &lt;/InputGroup&gt;&#10;      &lt;FormErrorMessage&gt;&#10;        {errorMessage}&#10;      &lt;/FormErrorMessage&gt;&#10;      {validationMessage &amp;&amp; (&#10;        &lt;Text &#10;          fontSize=&quot;sm&quot; &#10;          color={usernameValidation.isValid ? &quot;green.500&quot; : &quot;red.500&quot;} &#10;          mt={1}&#10;        &gt;&#10;          {validationMessage}&#10;        &lt;/Text&gt;&#10;      )}&#10;    &lt;/FormControl&gt;&#10;  );&#10;};&#10;&#10;export default UserInput;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/src/hooks/usePostContent.ts">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/hooks/usePostContent.ts" />
              <option name="originalContent" value="import { useState } from 'react';&#10;import { postsAPI } from '../services/api';&#10;import { PostListItem } from '../types';&#10;&#10;export const usePostContent = () =&gt; {&#10;  const [loadingContents, setLoadingContents] = useState&lt;Set&lt;number&gt;&gt;(new Set());&#10;&#10;  const loadFirstContentForPosts = async (postsToLoad: PostListItem[]): Promise&lt;PostListItem[]&gt; =&gt; {&#10;    // Načítáme obsah pro všechny příspěvky paralelně&#10;    const contentPromises = postsToLoad.map(async (post) =&gt; {&#10;      try {&#10;        setLoadingContents(prev =&gt; new Set(prev).add(post.postId));&#10;&#10;        const response = await postsAPI.getPostContents(post.postId);&#10;        const contents = response.data || [];&#10;&#10;        // Najdeme první obsah (pokud existuje)&#10;        const firstContent = contents.length &gt; 0 ? contents[0].content : null;&#10;&#10;        return {&#10;          postId: post.postId,&#10;          firstContent&#10;        };&#10;      } catch (error) {&#10;        console.error(`Chyba při načítání obsahu pro příspěvek ${post.postId}:`, error);&#10;        return {&#10;          postId: post.postId,&#10;          firstContent: null&#10;        };&#10;      } finally {&#10;        setLoadingContents(prev =&gt; {&#10;          const newSet = new Set(prev);&#10;          newSet.delete(post.postId);&#10;          return newSet;&#10;        });&#10;      }&#10;    });&#10;&#10;    const contentResults = await Promise.all(contentPromises);&#10;&#10;    // Vrátíme příspěvky s načteným obsahem&#10;    return postsToLoad.map(post =&gt; {&#10;      const contentResult = contentResults.find(r =&gt; r.postId === post.postId);&#10;      return {&#10;        ...post,&#10;        firstContent: contentResult?.firstContent || undefined&#10;      };&#10;    });&#10;  };&#10;&#10;  return {&#10;    loadingContents,&#10;    loadFirstContentForPosts&#10;  };&#10;};&#10;" />
              <option name="updatedContent" value="import { useState } from 'react';&#13;&#10;&#13;&#10;// DEPRECATED: Tento hook už není potřeba, protože nové detailní endpointy&#13;&#10;// (getPostsDetailed, getEditorPostsDetailed, getNetworkPosts) už vrací&#13;&#10;// kompletní data včetně obsahu a objektu creator.&#13;&#10;// Použijte místo toho přímo detailní API endpointy.&#13;&#10;&#13;&#10;export const usePostContent = () =&gt; {&#13;&#10;  console.warn('usePostContent hook je deprecated. Použijte detailní API endpointy místo toho.');&#13;&#10;  &#13;&#10;  return {&#13;&#10;    loadFirstContentForPosts: () =&gt; Promise.resolve([]),&#13;&#10;    loadingContents: new Set&lt;number&gt;()&#13;&#10;  };&#13;&#10;};" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>